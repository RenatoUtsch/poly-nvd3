<!--
    @license
    Copyright (c) 2015 Renato Utsch. All rights reserved.
    This code may only be used under the BSD style license found at http://renatoutsch.github.io/LICENSE.txt
-->
<link rel="import" href="../nvd3-abstract-chart/nvd3-abstract-chart.html">

<!--
This element is a polymer wrapper for the NVD3 pie chart.

@element nvd3-pie-chart
@blurb Polymer wrapper for the NVD3 pie chart.
@status alpha
@homepage http://renatoutsch.github.io/poly-nvd3/nvd3-pie-chart
-->
<polymer-element name="nvd3-pie-chart" extends="nvd3-abstract-chart">
    <script>
        Polymer({
            publish: {
                /**
                 * Function that returns the x value of the chart.
                 *
                 * @attribute x
                 * @type Object
                 */
                x: function(d) { return d.label; },

                /**
                 * Function that returns the y value of the chart.
                 *
                 * @attribute y
                 * @type Object
                 */
                y: function(d) { return d.value; },

                /**
                 * The colors selected for the elements of the chart.
                 *
                 * @attribute color
                 * @type Object
                 */
                color: nv.utils.defaultColor(),

                /**
                 * If the pie chart is actually a donut chart.
                 *
                 * @attribute donut
                 * @type bool
                 * @default false
                 */
                donut: false,

                /**
                 * Percent of pie to cut to form the radius. Between 0 and 1.
                 *
                 * @attribute donutRatio
                 * @type Float
                 * @default 0.5
                 */
                donutRatio: 0.5,

                /**
                 * What kind of data to display on the slice labels. Options are
                 * key, value or percent.
                 *
                 * @attribute labelType
                 * @type String
                 * @default "key"
                 */
                labelType: "key",

                /**
                 * If is to show the legend.
                 *
                 * @attribute showLegend
                 * @type bool
                 * @default true
                 */
                showLegend: true,

                /**
                 * If is to show the labels.
                 *
                 * @attribute showLabels
                 * @type bool
                 * @default true
                 */
                showLabels: true
            },

            nvModel: nv.models.pieChart,

            /**
             * See the documentation for this function in the
             * nvd3-abstract-chart element.
             *
             * @method configureChart
             */
            configureChart: function() {
                this.super();

                this.chart
                    .color(this.color)
                    .x(this.x)
                    .y(this.y)
                    .donut(this.donut)
                    .donutRatio(this.donutRatio)
                    .labelType(this.labelType)
                    .growOnHover(false) // TODO This will stay while the option is buggy.
                    .showLegend(this.showLegend)
                    .showLabels(this.showLabels);
            }
        });
    </script>
</polymer-element>
