<!--
    @license
    Copyright (c) 2015 Renato Utsch. All rights reserved.
    This code may only be used under the BSD style license found at http://renatoutsch.github.io/LICENSE.txt
-->
<link rel="import" href="../nvd3-abstract-chart/nvd3-abstract-chart.html">

<!--
This element is a polymer wrapper for the NVD3 scatter chart.

@element nvd3-scatter-chart
@blurb Polymer wrapper for the NVD3 scatter chart.
@status alpha
@homepage http://renatoutsch.github.io/poly-nvd3/nvd3-scatter-chart
-->
<polymer-element name="nvd3-scatter-chart" extends="nvd3-abstract-chart">
    <script>
        Polymer({
            publish: {
                /**
                 * Function that returns the x value of the chart.
                 *
                 * @attribute x
                 * @type Object
                 */
                x: function(d) { return d.x; },

                /**
                 * Function that returns the y value of the chart.
                 *
                 * @attribute y
                 * @type Object
                 */
                y: function(d) { return d.y; },

                /**
                 * List of points to force on the X axis.
                 *
                 * @attribute forceX
                 * @type Object
                 */
                forceX: null,

                /**
                 * List of points to force on the Y axis.
                 *
                 * @attribute forceY
                 * @type Object
                 */
                forceY: null,

                /**
                 * List of points to force on the points size.
                 *
                 * @attribute forcePoint
                 * @type Object
                 */
                forcePoint: null,

                /**
                 * Size of the elements of the chart.
                 *
                 * @attribute size
                 * @type Object
                 */
                pointSize: function(d) { return d.size || 1; },

                /**
                 * Range of the point sizes.
                 *
                 * @attribute pointRange
                 * @type Object
                 */
                pointRange: null,

                /**
                 * The colors selected for the elements of the chart.
                 *
                 * @attribute color
                 * @type Object
                 */
                color: nv.utils.defaultColor(),

                /**
                 * If is to show the x axis.
                 *
                 * @attribute showXAxis
                 * @type bool
                 * @default true
                 */
                showXAxis: true,

                /**
                 * If is to show the y axis.
                 *
                 * @attribute showYAxis
                 * @type bool
                 * @default true
                 */
                showYAxis: true,

                /**
                 * If is to show the legend.
                 *
                 * @attribute showLegend
                 * @type bool
                 * @default true
                 */
                showLegend: true,

                /**
                 * showDistX.
                 *
                 * @attribute showDistX
                 * @type bool
                 * @default true
                 */
                showDistX: true,

                /**
                 * showDistY
                 *
                 * @attribute showDistY
                 * @type bool
                 * @default true
                 */
                showDistY: true,

                /**
                 * When useVoronoi is on, this masks each voronoi section with a
                 * circle to limit selection to smaller area.
                 *
                 * @attribute clipVoronoi
                 * @type bool
                 * @default true
                 */
                clipVoronoi: true,

                /**
                 * Highlight the yAxis's zero.
                 *
                 * @attribute highlightYZero
                 * @type bool
                 * @default false
                 */
                highlightYZero: false,

                /**
                 * Use voronoi diagram to select nearest point to display
                 * tooltip instead of requiring a hover over the specific point
                 * itself. Setting this to false will also set clipVoronoi to
                 * false.
                 *
                 * @attribute useVoronoi
                 * @type bool
                 * @default true
                 */
                useVoronoi: true,

                /**
                 * The label of the x axis.
                 *
                 * @attribute xAxisAxisLabel
                 * @type string
                 * @default ''
                 */
                xAxisAxisLabel: '',

                /**
                 * Angle (in degrees) to rotate the x axis labels.
                 *
                 * @attribute xAxisRotateLabels
                 * @type number
                 * @default 0
                 */
                xAxisRotateLabels: 0,

                /**
                 * Tick format of the x axis.
                 *
                 * @attribute xAxisTickFormat
                 * @type Object
                 */
                xAxisTickFormat: function(d) { return d3.format('.2f')(d); },

                /**
                 * The label of the y axis.
                 *
                 * @attribute yAxisAxisLabel
                 * @type string
                 * @default ''
                 */
                yAxisAxisLabel: '',

                /**
                 * Angle (in degrees) by which the y axis labels will be rotated.
                 *
                 * @attribute yAxisRotateLabels
                 * @type number
                 * @default 0
                 */
                yAxisRotateLabels: 0,

                /**
                 * Tick format of the y axis.
                 *
                 * @attribute yAxisTickFormat
                 * @type Object
                 */
                yAxisTickFormat: function(d) { return d3.format('.2f')(d); }

            },

            nvModel: nv.models.scatterChart,

            /**
             * See the documentation for this function in the
             * nvd3-abstract-chart element.
             *
             * @method configureChart
             */
            configureChart: function() {
                this.super();

                this.chart
                    .color(this.color)
                    .x(this.x)
                    .y(this.y)
                    .pointSize(this.pointSize)
                    .forceX(this.forceX)
                    .forceY(this.forceY)
                    .forcePoint(this.forcePoint)
                    .showXAxis(this.showXAxis)
                    .showYAxis(this.showYAxis)
                    .showDistX(this.showDistX)
                    .showDistY(this.showDistY)
                    .useVoronoi(this.useVoronoi)
                    .clipVoronoi(this.clipVoronoi)
                    .interactive(true)
                    .showLegend(this.showLegend);

                if(this.pointRange)
                    this.chart.pointRange(this.pointRange);

                this.chart.xAxis
                    .axisLabel(this.xAxisAxisLabel)
                    .rotateLabels(this.xAxisRotateLabels)
                    .tickFormat(this.xAxisTickFormat);

                this.chart.yAxis
                    .axisLabel(this.yAxisAxisLabel)
                    .rotateLabels(this.yAxisRotateLabels)
                    .tickFormat(this.yAxisTickFormat);
            },

            afterResize: function() {
                this.super();

                // Highlight Y Zero.
                if(this.highlightYZero) {
                    this.svg
                        .select(".nv-y .nv-axis .zero line")
                        .style("stroke", "#555");
                }
            }
        });
    </script>
</polymer-element>
