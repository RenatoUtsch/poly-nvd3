<!--
    @license
    Copyright (c) 2015 Renato Utsch. All rights reserved.
    This code may only be used under the BSD style license found at http://renatoutsch.github.io/LICENSE.txt
-->
<link rel="import" href="../nvd3-abstract-chart/nvd3-abstract-chart.html">

<!--
This element is a polymer wrapper for the NVD3 line chart.

@element nvd3-line-chart
@blurb Polymer wrapper for the NVD3 line chart.
@status alpha
@ehomepage http://renatoutsch.github.io/poly-nvd3/nvd3-line-chart
-->
<polymer-element name="nvd3-line-chart" extends="nvd3-abstract-chart">
    <script>
        Polymer({
            publish: {
                /**
                 * If true, masks lines within the X and Y scales using a clip-path.
                 *
                 * @attribute clipEdge
                 * @type boolean
                 */
                clipEdge: false,

                /**
                 * Colors to use for the different data. If an array is given,
                 * it is converted to a function automatically.
                 *
                 * @attribute color
                 * @type array or function
                 */
                color: nv.utils.defaultColor(),

                /**
                 * A provided function that allows a line to be non-continuous
                 * when not defined.
                 * https://github.com/mbostock/d3/wiki/SVG-Shapes#line_defined
                 *
                 * @attribute defined
                 * @type function
                 */
                defined: null,

                /**
                 * Duration in ms to take when updating chart. For things like
                 * bar charts, each bar can animate by itself but the total
                 * time taken should be this value.
                 *
                 * @attribute duration
                 * @type number
                 */
                duration: 250,

                /**
                 * Like forceX and forceY, this forces certain values onto the
                 * point scale.
                 *
                 * @attribute forcePoint
                 * @type number
                 */
                forcePoint: [],

                /**
                 * List of numbers to Force into the X scale (ie. 0, or a
                 * max / min, etc.). This ensures the numbers are in the X
                 * domain but doesn't override the whole domain. This option
                 * only applies if you have not overridden the whole domain
                 * with the xDomain option.
                 *
                 * @attribute forceX
                 * @type array
                 */
                forceX: [],

                /**
                 * List of numbers to Force into the Y scale (ie. 0, or a
                 * max / min, etc.). This ensures the numbers are in the Y
                 * domain but doesn't override the whole domain. This option
                 * only applies if you have not overridden the whole domain
                 * with the yDomain option.
                 *
                 * @attribute forceY
                 * @type array
                 */
                forceY: [],

                /**
                 * Controls the line interpolation between points, many options
                 * exist, see the D3 reference:
                 * https://github.com/mbostock/d3/wiki/SVG-Shapes#line_interpolate
                 *
                 * @attribute interpolate
                 * @type string
                 */
                interpolate: "linear",

                /**
                 * Function to define if a line is a normal line or if it fills
                 * in the area. Notice the default gets the value from the
                 * line's definition in data. If a non-function is given, it the
                 * value is used for all lines.
                 *
                 * @attribute isArea
                 * @type function or boolean
                 */
                isArea: function(d) { return d.area },

                /**
                 * When only one Y axis is used, this puts the Y axis on the
                 * right side instead of the left.
                 *
                 * @attribute rightAlignYAxis
                 * @type boolean
                 */
                rightAlignYAxis: false,

                /**
                 * Whether to display the legend or not.
                 *
                 * @attribute showLegend
                 * @type boolean
                 */
                showLegend: true,

                /**
                 * Display or hide the X Axis.
                 *
                 * @attribute showXAxis
                 * @type boolean
                 */
                showXAxis: true,

                /**
                 * Display or hide the Y Axis.
                 *
                 * @attribute showYAxis
                 * @type boolean
                 */
                showYAxis: true,

                /**
                 * Sets the chart to use a guideline and floating tooltip
                 * instead of requiring the user to hover over specific
                 * hotspots. Turning this on will set the 'interactive' and
                 * 'useVoronoi' options to false to avoid conflicting.
                 *
                 * @attribute useInteractiveGuideline
                 * @type boolean
                 */
                useInteractiveGuideline: true,

                /**
                 * Proxy function to return the X value so adjustments can be
                 * made if needed. For pie/donut chart this returns the key
                 * for the slice.
                 * The default is null because then the x value will be the
                 * NVD3's default.
                 *
                 * @attribute x
                 * @type function
                 * @default null
                 */
                x: null,

                /**
                 * Proxy function to return the Y value so adjustments can be
                 * made if needed. For pie/donut chart this returns the value
                 * for the slice.
                 * The default is null because then the y value will be the
                 * NVD3's default.

                 * @attribute y
                 * @type function
                 * @default null
                 */
                y: null,

                /**
                 * The label of the x axis.
                 *
                 * @attribute xAxisAxisLabel
                 * @type string
                 * @default ''
                 */
                xAxisAxisLabel: '',

                /**
                 * Angle (in degrees) to rotate the x axis labels.
                 *
                 * @attribute xAxisRotateLabels
                 * @type number
                 * @default 0
                 */
                xAxisRotateLabels: 0,

                /**
                 * Tick format of the x axis.
                 *
                 * @attribute xAxisTickFormat
                 * @type Object
                 */
                xAxisTickFormat: function(d) { return d3.format('d')(d); },

                /**
                 * The label of the y axis.
                 *
                 * @attribute yAxisAxisLabel
                 * @type string
                 * @default ''
                 */
                yAxisAxisLabel: '',

                /**
                 * Angle (in degrees) by which the y axis labels will be rotated.
                 *
                 * @attribute yAxisRotateLabels
                 * @type number
                 * @default 0
                 */
                yAxisRotateLabels: 0,

                /**
                 * Tick format of the y axis.
                 *
                 * @attribute yAxisTickFormat
                 * @type Object
                 */
                yAxisTickFormat: function(d) { return d3.format('.2f')(d); }
            },

            nvModel: nv.models.lineChart,

            /**
             * See the documentation for this function in the
             * nvd3-abstract-chart element.
             *
             * @method configureChart
             */
            configureChart: function() {
                this.super();

                this.chart
                    .clipEdge(this.clipEdge)
                    .color(this.color)
                    .duration(this.duration)
                    .forcePoint(this.forcePoint)
                    .forceX(this.forceX)
                    .forceY(this.forceY)
                    .interpolate(this.interpolate)
                    .isArea(this.isArea)
                    .rightAlignYAxis(this.rightAlignYAxis)
                    .showLegend(this.showLegend)
                    .showXAxis(this.showXAxis)
                    .showYAxis(this.showYAxis)
                    .useInteractiveGuideline(this.useInteractiveGuideline);

                if(this.defined)
                    this.chart.defined(this.defined);
                if(this.x)
                    this.chart.x(this.x);
                if(this.y)
                    this.chart.y(this.y);

                this.chart.xAxis
                    .axisLabel(this.xAxisAxisLabel)
                    .rotateLabels(this.xAxisRotateLabels)
                    .tickFormat(this.xAxisTickFormat);

                this.chart.yAxis
                    .axisLabel(this.yAxisAxisLabel)
                    .rotateLabels(this.yAxisRotateLabels)
                    .tickFormat(this.yAxisTickFormat);
            }
        });
    </script>
</polymer-element>
